# RUN: llc --verify-machineinstrs -mtriple=aarch64 -o - %s -run-pass pipeliner -aarch64-enable-pipeliner -pipeliner-mve-cg -debug-only=pipeliner 2>&1 | FileCheck %s

# A register defined inside the loop is referenced by multiple phis
# CHECK: Can not apply MVE expander: A value defined in the loop is referenced by two or more phis.
---
name:            test
tracksRegLiveness: true
body:             |
  bb.0:
    liveins: $x0

    %0:gpr64all = COPY $x0
    %13:fpr64 = FMOVD0
    %17:fpr64 = FMOVDi 8
    B %bb.1

  bb.1:
    %2:gpr64sp = PHI %0, %bb.0, %7, %bb.1
    %4:fpr64 = PHI %13, %bb.0, %5, %bb.1
    %6:fpr64 = PHI %13, %bb.0, %5, %bb.1
    %22:fpr64 = nofpexcept FMADDDrrr %17, %17, %17, implicit $fpcr
    %5:fpr64 = nofpexcept FADDDrr %4, killed %22, implicit $fpcr
    %23:gpr64 = nsw SUBSXri %2, 1, 0, implicit-def $nzcv
    %7:gpr64all = COPY %23
    Bcc 0, %bb.2, implicit $nzcv
    B %bb.1

  bb.2:
    $d0 = COPY %5
    RET_ReallyLR implicit $d0
...
